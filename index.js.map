{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst myApiKey = \"48961514-d720aad073d42be14fd4daf93\";\r\nconst URL = \"https://pixabay.com/api/\";\r\n\r\nexport async function axiosImages(query, currentPage = 1) {\r\n    try {\r\n        const response = await axios.get(URL, {\r\n            params: {\r\n                key: myApiKey,\r\n                q: query,\r\n                image_type: \"photo\",\r\n                orientation: \"horizontal\",\r\n                safesearch: \"true\",\r\n                page: currentPage,\r\n                per_page: 40\r\n            },\r\n        });\r\n\r\n        return {\r\n            images: response.data.hits,\r\n            totalHits: response.data.totalHits\r\n        };\r\n    } catch (error) {\r\n        console.error(\"Error fetching images:\", error);\r\n        iziToast.error({\r\n            message: \"An error occurred while fetching images. Please try again!\",\r\n            position: \"topRight\",\r\n            messageColor: \"#FAFAFB\",\r\n            backgroundColor: \"#EF4040\"\r\n        });\r\n        return { images: [], totalHits: 0 };\r\n    }\r\n}\r\n","import SimpleLightbox from \"simplelightbox\";\r\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\r\n\r\nconst gallery = document.querySelector(\".gallery\");\r\nlet lightbox = new SimpleLightbox(\".gallery a\");\r\n\r\nexport function displayImages(images, currentPage) {\r\n    if (currentPage === 1) {\r\n        clearGallery();\r\n    }\r\n\r\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\r\n        <li class=\"img-card\">\r\n            <a href=\"${largeImageURL}\">\r\n                <img \r\n                    src=\"${webformatURL}\" \r\n                    alt=\"${tags}\" \r\n                    data-source=\"${largeImageURL}\" \r\n                />\r\n            </a>\r\n            <div class=\"image-info\">\r\n                <p><strong>Likes:</strong> ${likes}</p>\r\n                <p><strong>Views:</strong> ${views}</p>\r\n                <p><strong>Comments:</strong> ${comments}</p>\r\n                <p><strong>Downloads:</strong> ${downloads}</p>\r\n            </div>\r\n        </li>`).join(\"\");\r\n\r\n    gallery.insertAdjacentHTML('beforeend', markup);\r\n    lightbox.refresh();\r\n}\r\n\r\nexport function clearGallery() {\r\n    gallery.innerHTML = \"\";\r\n}\r\n\r\n\r\n","import iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\nimport { axiosImages } from \"./js/pixabay-api\";\r\nimport { displayImages, clearGallery } from \"./js/render-functions\";\r\n\r\nconst form = document.querySelector(\"form\");\r\nconst loadingMessage = document.querySelector(\".loader\");\r\nconst loadingBottom = document.querySelector(\".loader-bottom\");\r\nconst btnLoadMore = document.querySelector(\".btn-loadmore\");\r\n\r\nlet currentPage = 1;\r\nlet previousSearch = \"\";\r\nlet userQuery = \"\";\r\n\r\nform.addEventListener(\"submit\", async (evt) => {\r\n    evt.preventDefault();\r\n\r\n    const input = evt.target.querySelector(\"input\");\r\n    const inputValue = input.value.trim();\r\n\r\n    if (inputValue === \"\") {\r\n        iziToast.error({\r\n            message: \"Please fill in the field!\",\r\n            position: \"topRight\",\r\n            messageColor: \"#FAFAFB\",\r\n            backgroundColor: \"#EF4040\"\r\n        });\r\n        return;\r\n    }\r\n\r\n    userQuery = inputValue;\r\n\r\n    if (inputValue !== previousSearch) {\r\n        currentPage = 1;\r\n        previousSearch = inputValue;\r\n        clearGallery(); // Очищення галереї перед новим пошуком\r\n    }\r\n\r\n    loadingMessage.style.display = \"block\"; // Показати лоадер\r\n    btnLoadMore.style.display = \"none\"; // Сховати кнопку \"Load More\"\r\n\r\n    try {\r\n        const { images, totalHits } = await axiosImages(userQuery, currentPage);\r\n\r\n        if (!images || images.length === 0) {\r\n            iziToast.warning({\r\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\r\n                position: \"topRight\",\r\n                messageColor: \"#FAFAFB\",\r\n                backgroundColor: \"#EF4040\"\r\n            });\r\n            return;\r\n        }\r\n\r\n        displayImages(images, currentPage);\r\n\r\n        if (currentPage * 40 >= totalHits) {\r\n            btnLoadMore.style.display = \"none\";\r\n            iziToast.error({\r\n                message: \"We're sorry, but you've reached the end of search results.\",\r\n                position: \"topRight\",\r\n                messageColor: \"#FAFAFB\",\r\n                backgroundColor: \"#EF4040\"\r\n            });\r\n        } else {\r\n            btnLoadMore.style.display = \"block\";\r\n        }\r\n\r\n        currentPage++;\r\n\r\n    } catch (error) {\r\n        iziToast.error({\r\n            message: \"Error fetching images\",\r\n            position: \"topRight\",\r\n            messageColor: \"#FAFAFB\",\r\n            backgroundColor: \"#EF4040\"\r\n        });\r\n    } finally {\r\n        loadingMessage.style.display = \"none\"; // Приховати лоадер\r\n    }\r\n\r\n    form.reset();\r\n});\r\n\r\nbtnLoadMore.addEventListener(\"click\", async () => {\r\n    btnLoadMore.style.display = \"none\"; // Приховати кнопку \"Load More\"\r\n    loadingBottom.style.display = \"block\"; // Показати лоадер\r\n\r\n    try {\r\n        const { images, totalHits } = await axiosImages(userQuery, currentPage);\r\n\r\n        if (images && images.length > 0) {\r\n            displayImages(images, currentPage);\r\n            currentPage++;\r\n\r\n            if (currentPage * 40 >= totalHits) {\r\n                btnLoadMore.style.display = \"none\";\r\n                iziToast.error({\r\n                    message: \"We're sorry, but you've reached the end of search results.\",\r\n                    position: \"topRight\",\r\n                    messageColor: \"#FAFAFB\",\r\n                    backgroundColor: \"#EF4040\"\r\n                });\r\n            } else {\r\n                btnLoadMore.style.display = \"block\";\r\n            }\r\n\r\n            scrollToNextImages();\r\n        }\r\n    } catch (error) {\r\n        iziToast.error({\r\n            message: \"Error loading more images\",\r\n            position: \"topRight\",\r\n            messageColor: \"#FAFAFB\",\r\n            backgroundColor: \"#EF4040\"\r\n        });\r\n    } finally {\r\n        loadingBottom.style.display = \"none\"; // Приховати лоадер\r\n    }\r\n});\r\n\r\nfunction scrollToNextImages() {\r\n    const firstImageCard = document.querySelector(\".img-card\");\r\n    if (firstImageCard) {\r\n        const cardHeight = firstImageCard.getBoundingClientRect().height;\r\n        window.scrollBy({\r\n            top: cardHeight * 2,\r\n            behavior: \"smooth\"\r\n        });\r\n    }\r\n}\r\n\r\n"],"names":["myApiKey","URL","axiosImages","query","currentPage","response","axios","error","gallery","lightbox","SimpleLightbox","displayImages","images","clearGallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","loadingMessage","loadingBottom","btnLoadMore","previousSearch","userQuery","evt","inputValue","iziToast","totalHits","scrollToNextImages","firstImageCard","cardHeight"],"mappings":"owBAEA,MAAMA,EAAW,qCACXC,EAAM,2BAEL,eAAeC,EAAYC,EAAOC,EAAc,EAAG,CACtD,GAAI,CACA,MAAMC,EAAW,MAAMC,EAAM,IAAIL,EAAK,CAClC,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAMC,EACN,SAAU,EACb,CACb,CAAS,EAED,MAAO,CACH,OAAQC,EAAS,KAAK,KACtB,UAAWA,EAAS,KAAK,SACrC,CACK,OAAQE,EAAO,CACZ,eAAQ,MAAM,yBAA0BA,CAAK,EAC7C,SAAS,MAAM,CACX,QAAS,6DACT,SAAU,WACV,aAAc,UACd,gBAAiB,SAC7B,CAAS,EACM,CAAE,OAAQ,CAAA,EAAI,UAAW,CAAC,CACpC,CACL,CC9BA,MAAMC,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIC,EAAW,IAAIC,EAAe,YAAY,EAEvC,SAASC,EAAcC,EAAQR,EAAa,CAC3CA,IAAgB,GAChBS,IAGJ,MAAMC,EAASF,EAAO,IAAI,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA,uBAErFL,CAAa;AAAA;AAAA,2BAETD,CAAY;AAAA,2BACZE,CAAI;AAAA,mCACID,CAAa;AAAA;AAAA;AAAA;AAAA,6CAIHE,CAAK;AAAA,6CACLC,CAAK;AAAA,gDACFC,CAAQ;AAAA,iDACPC,CAAS;AAAA;AAAA,cAE5C,EAAE,KAAK,EAAE,EAEnBb,EAAQ,mBAAmB,YAAaM,CAAM,EAC9CL,EAAS,QAAO,CACpB,CAEO,SAASI,GAAe,CAC3BL,EAAQ,UAAY,EACxB,CC7BA,MAAMc,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAiB,SAAS,cAAc,SAAS,EACjDC,EAAgB,SAAS,cAAc,gBAAgB,EACvDC,EAAc,SAAS,cAAc,eAAe,EAE1D,IAAIrB,EAAc,EACdsB,EAAiB,GACjBC,EAAY,GAEhBL,EAAK,iBAAiB,SAAU,MAAOM,GAAQ,CAC3CA,EAAI,eAAc,EAGlB,MAAMC,EADQD,EAAI,OAAO,cAAc,OAAO,EACrB,MAAM,KAAI,EAEnC,GAAIC,IAAe,GAAI,CACnBC,EAAS,MAAM,CACX,QAAS,4BACT,SAAU,WACV,aAAc,UACd,gBAAiB,SAC7B,CAAS,EACD,MACH,CAEDH,EAAYE,EAERA,IAAeH,IACftB,EAAc,EACdsB,EAAiBG,EACjBhB,KAGJU,EAAe,MAAM,QAAU,QAC/BE,EAAY,MAAM,QAAU,OAE5B,GAAI,CACA,KAAM,CAAE,OAAAb,EAAQ,UAAAmB,CAAW,EAAG,MAAM7B,EAAYyB,EAAWvB,CAAW,EAEtE,GAAI,CAACQ,GAAUA,EAAO,SAAW,EAAG,CAChCkB,EAAS,QAAQ,CACb,QAAS,2EACT,SAAU,WACV,aAAc,UACd,gBAAiB,SACjC,CAAa,EACD,MACH,CAEDnB,EAAcC,EAAQR,CAAW,EAE7BA,EAAc,IAAM2B,GACpBN,EAAY,MAAM,QAAU,OAC5BK,EAAS,MAAM,CACX,QAAS,6DACT,SAAU,WACV,aAAc,UACd,gBAAiB,SACjC,CAAa,GAEDL,EAAY,MAAM,QAAU,QAGhCrB,GAEH,MAAe,CACZ0B,EAAS,MAAM,CACX,QAAS,wBACT,SAAU,WACV,aAAc,UACd,gBAAiB,SAC7B,CAAS,CACT,QAAc,CACNP,EAAe,MAAM,QAAU,MAClC,CAEDD,EAAK,MAAK,CACd,CAAC,EAEDG,EAAY,iBAAiB,QAAS,SAAY,CAC9CA,EAAY,MAAM,QAAU,OAC5BD,EAAc,MAAM,QAAU,QAE9B,GAAI,CACA,KAAM,CAAE,OAAAZ,EAAQ,UAAAmB,CAAW,EAAG,MAAM7B,EAAYyB,EAAWvB,CAAW,EAElEQ,GAAUA,EAAO,OAAS,IAC1BD,EAAcC,EAAQR,CAAW,EACjCA,IAEIA,EAAc,IAAM2B,GACpBN,EAAY,MAAM,QAAU,OAC5BK,EAAS,MAAM,CACX,QAAS,6DACT,SAAU,WACV,aAAc,UACd,gBAAiB,SACrC,CAAiB,GAEDL,EAAY,MAAM,QAAU,QAGhCO,IAEP,MAAe,CACZF,EAAS,MAAM,CACX,QAAS,4BACT,SAAU,WACV,aAAc,UACd,gBAAiB,SAC7B,CAAS,CACT,QAAc,CACNN,EAAc,MAAM,QAAU,MACjC,CACL,CAAC,EAED,SAASQ,GAAqB,CAC1B,MAAMC,EAAiB,SAAS,cAAc,WAAW,EACzD,GAAIA,EAAgB,CAChB,MAAMC,EAAaD,EAAe,sBAAqB,EAAG,OAC1D,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QACtB,CAAS,CACJ,CACL"}